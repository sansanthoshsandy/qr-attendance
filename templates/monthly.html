<!DOCTYPE html>
<html>
<head>
    <title>Monthly Attendance Report</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        body {
            font-family: Arial;
            background: #111;
            color: #fff;
            padding: 20px;
        }

        h2 {
            text-align: center;
        }

        .filter-box {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        select, button {
            padding: 8px 12px;
            font-size: 16px;
            border-radius: 6px;
            border: none;
        }

        button {
            background: #00c853;
            color: #000;
            cursor: pointer;
            font-weight: bold;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th, td {
            padding: 10px;
            border-bottom: 1px solid #444;
            text-align: center;
        }

        th {
            background: #222;
        }

        .present {
            color: #00e676;
            font-weight: bold;
        }

        .absent {
            color: #ff5252;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            table {
                font-size: 14px;
            }
        }
    </style>
</head>
<body>

<h2>ðŸ“… Monthly Attendance Report</h2>

<div class="filter-box">
    <select id="year">
        <option value="2025">2025</option>
        <option value="2026" selected>2026</option>
    </select>

    <select id="month">
        <option value="1">January</option>
        <option value="2">February</option>
        <option value="3">March</option>
        <option value="4">April</option>
        <option value="5">May</option>
        <option value="6">June</option>
        <option value="7">July</option>
        <option value="8">August</option>
        <option value="9">September</option>
        <option value="10">October</option>
        <option value="11">November</option>
        <option value="12">December</option>
    </select>

    <button onclick="loadReport()">View Report</button>
</div>

<table>
    <thead>
        <tr>
            <th>Employee ID</th>
            <th>Name</th>
            <th>Present Days</th>
            <th>Absent Days</th>
        </tr>
    </thead>
    <tbody id="reportBody">
        <tr>
            <td colspan="4">Select month & year</td>
        </tr>
    </tbody>
</table>

<script>
function loadReport() {
    const year = document.getElementById("year").value;
    const month = document.getElementById("month").value;

    fetch(`/monthly_report?year=${year}&month=${month}`)
        .then(res => res.json())
        .then(data => {
            const body = document.getElementById("reportBody");
            body.innerHTML = "";

            if (data.length === 0) {
                body.innerHTML = "<tr><td colspan='4'>No data</td></tr>";
                return;
            }

            data.forEach(row => {
                body.innerHTML += `
                    <tr>
                        <td>${row.employee_id}</td>
                        <td>${row.name}</td>
                        <td class="present">${row.present_days}</td>
                        <td class="absent">${row.absent_days}</td>
                    </tr>
                `;
            });
        });
}
</script>

</body>
</html>
